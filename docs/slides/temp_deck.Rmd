
layout: true

.footer[[Week 12 - Thursday](https://ismayc.github.io/soc301_s2017/2017/04/20/week-12---thursday/)]

---


name: week12th
class: center, middle

# Week 12 - Thursday

# April 20, 2017
---

# Warmup

- Give the definition of _p_-value

- Summarize the lecture from Tuesday in 3-5 sentences

---

class: center, middle

# [Adjusted class schedule](https://ismayc.github.io/soc301_s2017/schedule/)


---

## There is Only One Test

<img src="figure/ht.png" alt="Drawing" style="width: 800px;"/>

Image source [here](http://allendowney.blogspot.com/2016/06/there-is-still-only-one-test.html)

---

## Hypothesis Testing in General

### The **how** of these 3 points may change, but the **what** doesn't:

1. Identify the test statistic
--

2. Construct the null distribution of the test statistic based on the null hypothesis
--

3. Compare the observed test statistic to the null distribution to compute the **p-value**

---

## Specifics 1: Test Statistic

We can do hypothesis testing for lots of different scenarios

Type  | Population Parameter | Test Statistic
------------- | ------------- | -------------
One-Sample  | Mean <br> $\mu$ | Sample Mean <br> $\overline{x}$
One-Sample  | Proportion <br> $\pi$ | Sample Proportion <br> $\widehat{p}$
Two-Sample (Independent) &nbsp; | Diff of Population Means <br> $\mu_1 - \mu_2$ | Diff of Sample Means <br> $\overline{x}_1 - \overline{x}_2$
Two-Sample (Paired) | Mean Population Difference <br> $\mu_{diff}$ | Mean Sample Difference <br> $\overline{x}_{diff}$
Two-Sample  | Diff of Population Proportions <br> $\pi_1 - \pi_2$ | Diff of Sample Proportions <br> $\widehat{p}_1 - \widehat{p}_2$

We'll discuss more advanced procedures (ANOVA and Chi-Square) on Tuesday.

---

## Specifics 2: Null Distribution

### We can construct the null distribution of the test statistic either

* Via computation i.e. simulation/shuffling
    - Ex: We used the **Permutation Test** i.e. we permuted things
* Via mathematics i.e. analytically
    - Ex: Traditionally via Probability using the **Central Limit Theorem**: $\overline{X}$ is Normally distributed as $n \rightarrow \infty$
- **Note**: the null distribution isn't always bell shaped! i.e. not always Normal

---

## Specifics 3: _p_-value

### For Two-Sample Independent tests, we have either

### Two-sided _p_-values

+ Two-tailed: $H_A: \mu_{1} - \mu_{2} \neq 0$

--

### One-sided _p_-values
--

+ Left-tailed: $H_A: \mu_{1} - \mu_{2} < 0$
--

+ Right-tailed: $H_A: \mu_{1} - \mu_{2} > 0$
---

## Moral of the Story

### If you forget what hypothesis testing and/or _p_-values are remember:

```{r, echo=FALSE, fig.width=16/2, fig.height=3.5}
library(mosaic)
simulation <- do(10000) * rflip(10)
ggplot(simulation, aes(x = heads)) + 
  geom_bar() +
  labs(x = "Number of Guesses Correct") +
  geom_vline(xintercept = 9, color = "red") +
  scale_x_continuous(breaks = 0:10)
```

- For this example (from this plot), since our observed results are far from what we expect, we reject our original "by chance" assumption in favor of the research hypothesis.

---

# Split into groups of 3-4

### For each of the following five problems BEFORE trying to identify which type of problem it is, identify 

- the variables of interest,
- the types of variables they are,
- and the observational units

### AFTER identifying the problem type for each of the five problems, start to layout what the null and alternative hypotheses are in symbols.

---

## Identify the type of problem:

### **Types**:  One Mean, One Proportion, Two Means (Independent), Two Means (Paired), Two Proportions

###  **Problem 1**:  Average income varies from one region of the country to another, and it often reflects both lifestyles and regional living expenses. Suppose a new graduate is considering a job in two locations, Cleveland, OH and Sacramento, CA, and he wants to see whether the average income in one of these cities is higher than the other. He would like to conduct a hypothesis test based on two randomly selected samples from the 2000 Census.

---

## Identify the type of problem:

### **Types**:  One Mean, One Proportion, Two Means (Independent), Two Means (Paired), Two Proportions

### **Problem 2**:  A 2010 survey asked 827 randomly sampled registered voters in California "Do you support? Or do you oppose? Drilling for oil and natural gas off the Coast of California? Or do you not know enough to say?" Conduct a hypothesis test to determine if the data provide strong evidence that the proportion of college graduates who do not have an opinion on this issue is different than that of non-college graduates.

---

## Identify the type of problem:

### **Types**:  One Mean, One Proportion, Two Means (Independent), Two Means (Paired), Two Proportions

### **Problem 3**: The CEO of a large electric utility claims that 80 percent of his 1,000,000 customers are satisfied with the service they receive. To test this claim, the local newspaper surveyed 100 customers, using simple random sampling. 73 were satisfied and the remaining were unsatisfied.  Based on these findings from the sample, can we reject the CEO's hypothesis that 80% of the customers are satisfied?

---

## Identify the type of problem:

### **Types**:  One Mean, One Proportion, Two Means (Independent), Two Means (Paired), Two Proportions

### **Problem 4**: The National Survey of Family Growth conducted by the Centers for Disease Control gathers information on family life, marriage and divorce, pregnancy, infertility, use of contraception, and men's and women's health. One of the variables collected on this survey is the age at first marriage. 5,534 randomly sampled US women between 2006 and 2010 completed the survey. The women sampled here had been married at least once.  Do we have evidence that the mean age of first marriage for all US women from 2006 to 2010 is greater than 23 years?

---

## Identify the type of problem:

### **Types**:  One Mean, One Proportion, Two Means (Independent), Two Means (Paired), Two Proportions

### **Problem 5**: Trace metals in drinking water affect the flavor and an unusually high concentration can pose a health hazard. Ten pairs of data were taken measuring zinc concentration in bottom water and surface water at 10 randomly selected locations on a stretch of river. Do the data suggest that the true average concentration in the surface water is smaller than that of bottom water? (Note that units are not given.)


---

## To do for next time (individually)

- Read [this article](http://fivethirtyeight.com/features/you-cant-trust-what-you-read-about-nutrition/) about _p_-hacking from 538
  - Summarize the main findings from the article and how it relates to the content in Chapter 7 of ModernDive in 3-5 paragraphs
- Create AT LEAST five multiple choice questions covering Chapters 6 and 7 of [ModernDive](http://moderndive.com).  More directions [here](https://ismayc.github.io/soc301_s2017/problem-sets/index.html#ps11).

---



layout: true

.footer[[Week 12 - Tuesday](https://ismayc.github.io/soc301_s2017/2017/04/18/week-12---tuesday/)]

---


name: week12t
class: center, middle

# Week 12 - Tuesday

# April 18, 2017
---

class: center, middle

# WARMUP

<!--
Summarize Sections 7.1 - 7.5 in your own words in 4-5 sentences
-->

---

## Review Problem Set 10 from last time in pairs

- If not listed, review [Problem Set 10 Discussion](https://ismayc.github.io/soc301_s2017/problem-sets/ps-key/index.html#ps10-key)
***

<br>

.left-column[
- Jayla, Jeremy
- Rachel, Alicia F.
- Ariel, Alicia O.
- Alexandra, Tia
- Hannah, Kelsey
]

.right-column[
- Emily, Natasha
- Fernando, Karla
- Garrett, Daisy
- Lina, Bree
- Taylor, Cydni
]


---

## County Characteristics Datasets

### Annual County Resident Population Estimates by Age, Sex, Race, and Hispanic Origin

- Downloaded from [here](https://www2.census.gov/programs-surveys/popest/datasets/2010-2015/counties/asrh/) via <br> <small> `cc-est2015-alldata.csv` </small>
- Codebook is available [here](https://www2.census.gov/programs-surveys/popest/datasets/2010-2015/counties/asrh/cc-est2015-alldata.pdf)
- This dataset is NOT **tidy**.  I've tidied it and focused on only Total Population and Black or African American alone.

```{r message=FALSE, warning=FALSE}
# Remember to load the needed packages
library(dplyr)
library(mosaic)
library(ggplot2)
library(readr)
```

---

## Hypothesis Testing

### Comparing mean percentages in two states

- Suppose we were interested in testing the mean percentage of black residents in two different states.  Let's choose Oregon and Washington.
- Washington has 39 counties and Oregon has 36.
- Assume we only have access to 20 randomly selected counties from each state.

```{r eval=FALSE}
url <- "http://ismayc.github.io/wash-or_black.csv"
wash_or <- readr::read_csv(url) 
```

```{r include=FALSE}
wash_or <- read_csv("data/wash-or_black.csv")
```

---

## Problem set-up

### Do we have evidence that the mean percentage of black residents in Washington and Oregon is statistically different?

- What's the alternative hypothesis?
--

    - <small> $H_A: \mu_{wa} \ne \mu_{or}$ or $H_A: \mu_{wa} - \mu_{or} \ne 0$ </small>
    
- What is the null hypothesis?
--

    - <small> $H_0: \mu_{wa} = \mu_{or}$ or $H_0: \mu_{wa} - \mu_{or} = 0$ </small>

---

## The Hypotheses

- $H_0: \mu_{wa} - \mu_{or} = 0$ 
- $H_A: \mu_{wa} - \mu_{or} \ne 0$

### What do these mean in laymen terms?

--

- We are assuming that the mean percentage of black residents in Washington and Oregon is THE SAME.
- We will use hypothesis testing to look to see if we have evidence to go against this assumption in favor of the alternative hypothesis.

---

class: center, middle

## The layout of all hypothesis tests

```{r echo=FALSE}
knitr::include_graphics("figure/ht.png", dpi = 120)
```

---

## For our problem

### What is the *observational unit*?

```{r echo=FALSE}
wash_or %>% arrange(county) %>% select(county, state, black_perc) %>% 
                     sample_n(5) %>%
                     knitr::kable(format = "html")
```
--

<br>

- Counties in Washington and Oregon
---

## DATA:  

- We have collected our sample of 20 Washington counties and 20 Oregon counties

--

## TEST STATISTIC:  

- We are interested in the difference in sample means.

---

## OBSERVED EFFECT

```{r}
(state_means <- wash_or %>% group_by(state) %>% 
  summarize(mean_perc = mean(black_perc)))
(obs_diff <- diff(state_means$mean_perc))
```

- From our original (observed) sample, we have 

### $$\verb+obs_diff+ = \bar{x}_{wa} - \bar{x}_{or} = `r obs_diff`$$

---

## MODEL OF <small> $H_0$ </small>

### We assume that the two POPULATION mean percentages are the same:

- $H_0: \mu_{wa} = \mu_{or}$ <br> or <br> $H_0: \mu_{wa} - \mu_{or} = 0$

- EXTREMELY IMPORTANT NOTE:  Remember that PARAMETERS go in hypotheses NOT statistics!

---

## SIMULATED DATA 

### We want to use the data we have collected to simulate a process following the model for $H_0$.
--

### *BIG STEP* :  Assuming that <small> $H_0: \mu_{wa} = \mu_{or}$ </small>, any one of the percentages we saw in our sample data could have occurred (equally) in either Washington or in Oregon.

--

### We can use the `shuffle` function in the `mosaic` package to shuffle the percentages between Oregon and Washington.

---

## One shuffle

```{r}
set.seed(2016)
(shuffled_state_means <- wash_or %>%
     mutate(black_perc = shuffle(black_perc)) %>% 
     group_by(state) %>%
     summarize(mean_shuf_perc = mean(black_perc)))
(obs_shuf_diff <- diff(shuffled_state_means$mean_shuf_perc))
```

---

## NULL DISTRIBUTION

- Repeat this shuffling many times and then look at the distribution of all the resulting simulated test statistics

```{r cache=TRUE}
many_shuffles <- do(5000) *
  (shuffled_state_means <- wash_or %>%
     mutate(black_perc = shuffle(black_perc)) %>% 
     group_by(state) %>%
     summarize(mean_shuf_perc = mean(black_perc)))
rand_distn <- many_shuffles %>% 
  group_by(.index) %>% 
  summarize(diffmean = diff(mean_shuf_perc))
```

---

### Plot of NULL DISTRIBUTION

```{r fig.height=3.2}
ggplot(rand_distn, aes(x = diffmean)) +
  geom_histogram(color = "white", bins = 20)
```
- Where will the center of this distribution always be for tests of this sort?
--

    - 0 (We assumed the means were the same & used that process to build the distribution).

---

## View the _p_-value

### We want to see where our observed effect (the original different in sample means) falls on our NULL DISTRIBUTION.

- Note that we check for both directions here since we had a two-sided <small> $H_A$. </small>

```{r fig.height=2.7}
ggplot(rand_distn, aes(x = diffmean,
                      fill = (abs(diffmean) >= obs_diff))) +
  geom_histogram(color = "white", bins = 20)
```

---

## View the $p$-value

```{r fig.height=5}
 ggplot(data = rand_distn, aes(x = diffmean)) +
  geom_histogram(color = "white", bins = 20) +
  geom_vline(xintercept = obs_diff, color = "red") +
  geom_vline(xintercept = -obs_diff, color = "red")
```

---

## Calculate the _p_-value

```{r}
pvalue <- rand_distn %>%
  filter(abs(diffmean) >= obs_diff) %>%
  nrow() / nrow(rand_distn)
pvalue
```

### So there is around a `r round(pvalue * 100)`%  chance we could have seen results such as this (or MORE EXTREME) if the true population mean percentages were the same.  What does that mean?

---

## Significance level

- The "beyond a reasonable doubt" in statistics corresponds to setting the $\alpha$ value before you conduct your test.  Most often this is set to 5%.

- So with our test, since `r pvalue` > 0.05, we fail to reject <small> $H_0$ </small> in favor of <small> $H_A$ </small>.  

- We DO NOT have evidence to support the claim that the mean percentages of black residents per county are different for Washington and Oregon.

---

## All data

- The 2015 data for ALL counties is available via:

```{r}
cc_full <- read_csv("http://ismayc.github.io/cc_full.csv")
```

- Practice:  Determine what the actual difference is in mean percentage of black residents for ALL Washington and Oregon counties using code similar to what we did earlier.  

- Is the difference **practically** large?

```{r include=FALSE}
cc_full %>% filter(state %in% c("Oregon", "Washington")) %>% 
  group_by(state) %>% 
  summarize(mean_perc = mean(black_perc))
```

---

# Problem Set 11

- Due at the beginning of class this Thursday
- Turn in individually [prefer pencil-and-paper] (You can work with your peers but you'll get more learning if you compare answers AFTER you have tried them on your own.)
***
- Do problems LC7.1 - LC7.5
- Read the two articles from 538
  - [Statisticians Found One Thing They Can Agree On: It’s Time To Stop Misusing P-Values](http://fivethirtyeight.com/features/statisticians-found-one-thing-they-can-agree-on-its-time-to-stop-misusing-p-values/)
  - [Science Isn't Broken](https://fivethirtyeight.com/features/science-isnt-broken/)
  - Answer the questions corresponding [here](https://ismayc.github.io/soc301_s2017/problem-sets/index.html#ps11)
---

layout: true

.footer[[Week 11 - Thursday](https://ismayc.github.io/soc301_s2017/2017/04/13/week-11---thursday/)]

---


name: week11th
class: center, middle

# Week 11 - Thursday

# April 13, 2017
---


# Review Midterm Exam

- Here are the [solutions](Midterm_ExamKey.pdf)

---

# RStudio Tools

### All hail the <small>`mosaic`</small> package. Load as usual: <small>`library(mosaic)`</small>

### The following four functions will give us (most of) the random simulation tools we need:

1. `rflip()`: Flip a coin
1. `shuffle()`: Shuffle a set of values (akin to cards)
1. `do()`: Do the same thing many, many, many times
1. `resample()`: the swiss army knife of functions

---

## R Simulations Example

### First load up RStudio

- Create new R script file, type the following commands (not the comments), and run them in your R Console

```{r, message=FALSE, echo=TRUE}
# Load packages, including mosaic package
library(dplyr)
library(ggplot2)
library(mosaic)
# Flip a coin once. Try this multiple times:
rflip()
```

---

## R Simulations Example

```{r echo=TRUE}
# Flip a coin 10 times. Try this multiple times:
rflip(10)
```

---

## R Simulations Example

```{r echo=TRUE}
# Flip a coin 10 times, but do this 5 times. Try this multiple times
do(5) * rflip(10)
```

---

## R Simulations Example

```{r echo=TRUE}
# Flip a coin 10 times, but do this 5000 times
do(5000) * rflip(10)
```

---

## R Simulations Example

```{r cache=TRUE, echo=TRUE}
# Gah! There are too many rows!
simulations <- do(5000) * rflip(10)
```
```{r eval=FALSE, echo=TRUE}
# We could also View() it
View(simulations)
```

---

## R Simulations Example

```{r echo=TRUE, fig.height=5}
# Plot our resulting proportions
ggplot(data = simulations, aes(x = prop)) +
  geom_histogram(binwidth = 0.1, color = "white")
```

---

## R Simulations Example

```{r echo=TRUE, fig.height=5}
# Plot our resulting proportions
ggplot(data = simulations, mapping = aes(x = factor(prop))) +
  geom_bar()
```


---


## Shuffling AKA Permuting

Shuffling AKA re-ordering AKA **permuting** are all synonyms. I'm going to use
all three terms interchangeably. 

Type the following code into your R script:

```{r, eval=FALSE}
library(mosaic)
# Define a vector fruit
fruit <- c("apple", "orange", "mango")

# Do this multiple times:
shuffle(fruit)
```

---


## Shuffling AKA Permuting

This works with the `do()` operator...

```{r, eval=FALSE}
do(5) * shuffle(fruit)
```

... as well as within a `mutate()`



```{r, eval=FALSE}
example_data <- data_frame(
  name = c("Ilana", "Abbi", "Hannibal"),
  fruit = c("apple", "orange", "mango")
)

# Run this multiple times: 
example_data %>% mutate(fruit = shuffle(fruit))
```

---

## Key Distinction

### A *huge* distinction in types of sampling:

1. Sampling **with** replacement
1. Sampling **without** replacement

---

## Resampling

### At its most basic, `resample()` resamples the input vector **with** replacement. Run this in the console multiple times from your R script:

```{r, eval=FALSE}
resample(fruit)
```

* You can get the same fruit all three times i.e. sampling with replacement
* `resample()` has default settings that we can set to fit our needs; it is a swiss army knife.
* Let's unpack the defaults:

---


## Resampling

```{r, eval=FALSE}
resample(x = fruit, size = length(x), replace = TRUE, 
         prob = rep(1 / length(x), times = length(x)) )
```

* <small>`x`</small> is the input. In this case <small>`fruit`</small>.
* <small>`size`</small>: size of output vector. By default the same size as <small>`x`</small>.
* <small>`replace`</small>: Sample **with** or **without** replacement. By default with replacement.
* <small>`prob`</small>: Probability of sampling each input value. By default, equal probability
* Run the following.  What does it do?

```{r eval=FALSE}
rep(1/length(fruit), times = length(fruit))
```

---

## Scenario for Today

* Say you are a statistician and you meet someone called the "Lady Tasting Tea."
* She claims she can tell by tasting whether the tea or the milk was added first to a cup.
--

* You want to test whether
    + She can actually tell which came first **OR**
    + She's lying and is only guessing at random
--
* Say you have just enough tea/milk to pour into 10 cups.

---

## Lady Tasting Tea

* Lady Tasting Tea claims she can tell if tea or milk was poured first into a cup
* You run an experiment with 10 cups if she can tell or if she is bullshitting
* Let's _assume a hypothetical world where she is guessing at random_.

---

## Lady Tasting Tea

### If guessing at random, here are the *hypothetical* outcomes:

```{r, echo=FALSE, cache=TRUE, fig.height=5.5}
simulation <- do(5000) * rflip(10)
ggplot(simulation, aes(x = heads)) + 
  geom_bar() +
  labs(x="Number of Guesses Correct")
```

---

## Lady Tasting Tea

She got 9/10 right!

```{r, cache=TRUE}
ggplot(simulation, aes(x = heads)) + 
  geom_bar() +
  labs(x = "Number of Guesses Correct") +
  geom_vline(xintercept = 9, color = "red")
```

---

## Lady Tasting Tea

She got 9/10 right!

```{r, cache=TRUE}
ggplot(simulation, aes(x = heads)) + 
  geom_bar() +
  labs(x = "Number of Guesses Correct") +
  geom_vline(xintercept = 9, color = "red") +
  scale_x_continuous(breaks = 0:10)
```

---

## Lady Tasting Tea

* In our hypothetical world of guessing at random, 9/10 OR MORE occured 
`r sum(simulation$heads == 9) + sum(simulation$heads == 10)` times out of `r nrow(simulation)`. i.e. <br>
`r round(100*(sum(simulation$heads == 9) + sum(simulation$heads == 10))/nrow(simulation), 3)`% of the time. 
* Can she tell, or is she bullshitting?

---

## Problem Set 10

- Due by end of class today
- Turn in individually via pencil-and-paper

### [Learning Checks](https://ismayc.github.io/moderndiver-book/6-sim.html)

- LC6.1
- LC6.3
- LC6.9
- LC6.11
- LC6.13
- LC6.15

---

layout: true

.footer[[Week 10 - Tuesday](https://ismayc.github.io/soc301_s2017/2017/04/04/week-10---tuesday/)]

---


name: week10t
class: center, middle

# Week 10 - Tuesday

# April 4, 2017
---


# Warmup - Similar to Old Exam Question

What `dplyr` and `ggplot2` code is needed to produce the following plot using the `gapminder` data set?  (You can assume `library()` has already been run on all needed packages.) *Hint*:  You should use the `%in%` operator.

```{r echo=FALSE, fig.width=11, fig.height=5}
library(gapminder)
library(ggplot2)
library(dplyr)
country_list <- c("Guatemala", "Uganda", "Ethiopia", "Bangladesh")
six_countries <- gapminder %>% dplyr::filter(country %in% country_list)
ggplot(data = six_countries, 
  aes(x = year, y = lifeExp, color = country)) +
  geom_line() +
  geom_point()
```

What stands out to you from a social perspective as you observe this graph?

---

## Goals for the course going forward

- Focus on understanding how data visualization and data wrangling play a role in inference
- Discuss FiveThirtyEight articles from a social perspective while also relating back to statistical content
- Work on summarizing important content and giving you a better sense of what to expect
- What I need from you
  - More questions!  I can't know what you don't understand unless you ask.
  - Focus on testing for your own understanding and speaking up when something needs more explanation

---

## Today: Switching Gears

* We've covered **Tidy**, **Visualize**, and **Transform** 
* Start with **Model**
* The focus throughout is on **Communicate**.

<img src="figure/pipeline.png" alt="Drawing" style="width: 700px;" border="1"/>

---

## Key Definitions

### Let's ask our favorite search engine:

* Define inference
* Define **statistical** inference

---

# Sampling

## Match the term to its correct definition

- Carefully read over the [worksheet](sampling.pdf) individually
- Complete the [worksheet](sampling.pdf) individually
- Then pair up with two or three new people from class that you haven't worked with before to
go over your answers


---

## The Paradigm for the Rest of the Class

<img src="figure/target-population.jpg" alt="Drawing" style="width: 700px;" border="1"/>

---

- <small><small>Identify the **population** of interest and the **population parameter**</small></small>
- <small><small>Identify the **sample** used and the **statistic**</small></small>
- <small><small>Comment on the **generalizability** of the results of the sample to the population.</small></small>

***

- <small><small>You want to understand the income of Pacific University graduates in the last 10 years.  You get the records of 10 randomly chosen Pacific graduates.  You take the median of their answers.</small></small>
- <small><small>Imagine it's 1993 i.e. almost all households have landlines.  You want to know the average number of people in each household in Forest Grove.  You randomly pick out 500 numbers from the phone book & conduct a phone survey.</small></small>
- <small><small>You want to know the prevalence (i.e. proportion) of illegal downloading of TV shows among Pacific University students.  You get the emails of 100 randomly chosen Pacific University students and ask them "How many times did you download a pirated TV show last week?"</small></small>

---

## Visualizing Sampling

### OkCupid Self-reported Heights from [ModernDive](https://ismayc.github.io/moderndiver-book/6-sim.html#visualizing-sampling)


- [Shiny app to better understand the role of sampling](https://ismay.shinyapps.io/okcupidheights/)

---

## Recall

* **Random** sampling: where we select the sample from the population in an unbiased fashion
* Bias: A sample is biased if some observations have a higher **probability** of being
included in the sample. 

> * Keywords: **random** and **probability**

--

* In short: Probability is the study of randomness.
* Its roots lie in one [historical constant](https://www.google.com/search?q=probability&newwindow=1&source=lnms&tbm=isch&sa=X&ved=0ahUKEwjnvJG7_oTQAhVIQiYKHSQ7CnoQ_AUICSgC&biw=2559&bih=1316&dpr=2#newwindow=1&tbm=isch&q=history+of+gambling).

---


## Two Approaches to Probability

There are two approaches to studying probability:

Mathematically             |  Simulations
:-------------------------:|:-------------------------:
<img src="figure/pdf.png" alt="Drawing" style="width: 300px;"/>  |  <img src="figure/coin.jpg" alt="Drawing" style="width: 300px;"/>

> * **Note**: The "random simulation" in question is not limited to coin flips.

---


## Two Approaches to Probability

- The mathematical approach to studying probability requires more mathematical background: set theory, discrete math, calculus, and later on measure theory.
--

- The simulation approach does not.
--

- Instead we require a computer's **random number generator** to generate simulations. Why?

---


## Simulations via Computer

Doing this repeatedly by hand is tiring:

<img src="figure/coin.jpg" alt="Drawing" style="width: 100px;"/><img src="figure/coin.jpg" alt="Drawing" style="width: 100px;"/><img src="figure/coin.jpg" alt="Drawing" style="width: 100px;"/><img src="figure/coin.jpg" alt="Drawing" style="width: 100px;"/><img src="figure/coin.jpg" alt="Drawing" style="width: 100px;"/><img src="figure/coin.jpg" alt="Drawing" style="width: 100px;"/><img src="figure/coin.jpg" alt="Drawing" style="width: 100px;"/><img src="figure/coin.jpg" alt="Drawing" style="width: 100px;"/><img src="figure/coin.jpg" alt="Drawing" style="width: 100px;"/><img src="figure/coin.jpg" alt="Drawing" style="width: 100px;"/><img src="figure/coin.jpg" alt="Drawing" style="width: 100px;"/><img src="figure/coin.jpg" alt="Drawing" style="width: 100px;"/><img src="figure/coin.jpg" alt="Drawing" style="width: 100px;"/><img src="figure/coin.jpg" alt="Drawing" style="width: 100px;"/><img src="figure/coin.jpg" alt="Drawing" style="width: 100px;"/><img src="figure/coin.jpg" alt="Drawing" style="width: 100px;"/><img src="figure/coin.jpg" alt="Drawing" style="width: 100px;"/><img src="figure/coin.jpg" alt="Drawing" style="width: 100px;"/><img src="figure/coin.jpg" alt="Drawing" style="width: 100px;"/><img src="figure/coin.jpg" alt="Drawing" style="width: 100px;"/><img src="figure/coin.jpg" alt="Drawing" style="width: 100px;"/><img src="figure/coin.jpg" alt="Drawing" style="width: 100px;"/><img src="figure/coin.jpg" alt="Drawing" style="width: 100px;"/><img src="figure/coin.jpg" alt="Drawing" style="width: 100px;"/><img src="figure/coin.jpg" alt="Drawing" style="width: 100px;"/><img src="figure/coin.jpg" alt="Drawing" style="width: 100px;"/><img src="figure/coin.jpg" alt="Drawing" style="width: 100px;"/><img src="figure/coin.jpg" alt="Drawing" style="width: 100px;"/><img src="figure/coin.jpg" alt="Drawing" style="width: 100px;"/><img src="figure/coin.jpg" alt="Drawing" style="width: 100px;"/><img src="figure/coin.jpg" alt="Drawing" style="width: 100px;"/><img src="figure/coin.jpg" alt="Drawing" style="width: 100px;"/><img src="figure/coin.jpg" alt="Drawing" style="width: 100px;"/><img src="figure/coin.jpg" alt="Drawing" style="width: 100px;"/><img src="figure/coin.jpg" alt="Drawing" style="width: 100px;"/><img src="figure/coin.jpg" alt="Drawing" style="width: 100px;"/><img src="figure/coin.jpg" alt="Drawing" style="width: 100px;"/><img src="figure/coin.jpg" alt="Drawing" style="width: 100px;"/><img src="figure/coin.jpg" alt="Drawing" style="width: 100px;"/><img src="figure/coin.jpg" alt="Drawing" style="width: 100px;"/><img src="figure/coin.jpg" alt="Drawing" style="width: 100px;"/><img src="figure/coin.jpg" alt="Drawing" style="width: 100px;"/>

---

# [Problem Set 9 Assignment for Thursday](http://ismayc.github.io/soc301_s2017/problem-sets/index.html#ps9)

- Due at the end of the day (11:59 PM on Thursday)
- You will be peer reviewing a Group Project assigned to you
- You'll also be including (Helpful for Midterm Exam)
  - an updated plot using `ggplot2`
  - a `dplyr` wrangling task to summarize the `fivethirtyeight` data frame used in the vignette
- This will give you practive with `dplyr`, `ggplot2`, and `rmarkdown` while (hopefully)
ensuring that you can perform the tasks asked of you in the group project individually.

---


layout: true

.footer[[Week 08 - Tuesday](https://ismayc.github.io/soc301_s2017/2017/03/21/week-08---tuesday/)]

---

name: week08t
class: center, middle

# Week 08 - Tuesday

# March 21, 2017
---

class: center, middle

# Very impressed with Group Project drafts!

```{r echo=FALSE, out.width="80%"}
knitr::include_graphics("https://media.giphy.com/media/sjDV6YTbw8tig/giphy.gif")
```


---

# Jazzing up your Group Project plots

- Make sure to add labels to your axes and a title to your plot via
`labs(x = , y = , title = )`.  
  - Remember to use the `+` to add labs/themes to your plot
just like you do with `geom_`etries

---

# Jazzing up your Group Project plots


- Think about using `theme_fivethirtyeight()` as I did in the `example_vignette.Rmd`.  
  - Note your need to install the `ggthemes` package and load it via `library(ggthemes)` in the top R Markdown chunk.
- Another option for cool themes of your plots is `theme_ipsum()` in the [`hrbrthemes` package](https://github.com/hrbrmstr/hrbrthemes)


---

# Warmup
--

1. How can I better address this feedback?  
    - "more of a social science aspect to the data we are using in our work."
2. "I was under the impression we were going to analyze data more than we have been."
    - What does 'analyzing data' mean to you?
3.  Why do I ask DataCamp questions over content we haven't explicitly covered?

---

# Comment

### "I wish there was a way for us to go over material with you if we had to miss class one day."
--

  - I'm happy to chat with you (even be it over video chat).  All it takes is you reaching out to me.
  - I'd encourage you to look over the slides first to better understand what you've missed and to do the reading assignment in the textbook before reaching out to me.  FoR Simulations Example, `geom_col` was discussed when we talked about [barplots](#geomcol).

---

# Work day!

- Look over my comments on your Group Project
  - Press the spellcheck button in R Markdown!
    ```{r echo=FALSE, fig.align='center'}
    knitr::include_graphics("figure/spellcheck.png")
    ```
- Do [Problem Set 8](https://goo.gl/forms/tCBFF7cuMbYgPIyb2) 
- Finish [dplyr Review](https://campus.datacamp.com/courses/effective-data-storytelling-using-the-tidyverse/dplyr-review-8) (Due today at 11:59 PM)
- Read [Chapter 6 of ModernDive](https://ismayc.github.io/moderndiver-book/6-sim.html)

## ENJOY YOUR SPRING BREAK!


---

layout: true

.footer[[Week 07 - Tuesday](https://ismayc.github.io/soc301_s2017/2017/03/14/week-07---tuesday/)]

---

name: week07t
class: center, middle

# Week 07 - Tuesday

# March 14, 2017
---

# Warmup

### Write the code to produce the following table using ALL 5 of the 5MV functions in the `dplyr` package on the `gapminder` data frame in the `gapminder` R package.  
- Your code will be simplest if you use `|` in your `filter`.
- Notice how the data is sorted.

<br>

```{r echo=FALSE}
library(gapminder)
gapminder %>% 
  dplyr::filter(country %in% c("Belgium", "South Africa") | continent == "Oceania") %>%
  group_by(continent, country) %>% 
  summarize(mean_gdp_all_years = mean(gdpPercap)) %>% 
  mutate(mean_minus_one = mean_gdp_all_years - 1) %>% 
  arrange(mean_gdp_all_years) %>% 
  knitr::kable(format = "html")
```
---

class: center, middle

# Today is a work day on your Group Projects

---

layout: true

.footer[[Week 06 - Thursday](https://ismayc.github.io/soc301_s2017/2017/03/09/week-07---thursday/)]

---

name: week06th
class: center, middle

# Week 06 - Thursday

# March 9, 2017
---

# Warmup

### Write the code to produce the following table using functions in the `dplyr` package on the `gapminder` data frame in the `gapminder` R package

```{r echo=FALSE}
library(gapminder)
gapminder %>% 
  dplyr::filter(continent == "Oceania" | country %in% c("Canada", "United States")) %>%
  group_by(continent, country) %>% 
  summarize(mean_gdp_all_years = mean(gdpPercap))
```

---

# Setting 1 to change in RStudio

```{r out.width="65%", echo=FALSE, fig.align='center'}
knitr::include_graphics("figure/setting1.png")
```

---

# Setting 2 to change in RStudio

```{r out.width="65%", echo=FALSE, fig.align='center'}
knitr::include_graphics("figure/setting2.png")
```

---

# Review of the 5MV so far

- `filter()`
- `summarize()`
- `group_by()`

---

# The 5MV

- `filter()`
- `summarize()`
- `group_by()`
--

- `mutate()`

--
- `arrange()`

---

# `mutate()`

- Allows you to 
    1. <font color="blue">create a new variable with a specific value</font> OR
    2. create a new variable based on other variables OR
    3. change the contents of an existing variable

--

```{r}
gap_plus <- gapminder %>% mutate(just_one = 1)
head(gap_plus)
```

---

# `mutate()`

- Allows you to 
    1. create a new variable with a specific value OR
    2. <font color="blue">create a new variable based on other variables</font> OR
    3. change the contents of an existing variable

--

```{r}
gap_w_gdp <- gapminder %>% mutate(gdp = pop * gdpPercap)
head(gap_w_gdp)
```

---

# `mutate()`

- Allows you to 
    1. create a new variable with a specific value OR
    2. create a new variable based on other variables OR
    3. <font color="blue">change the contents of an existing variable</font>

--

```{r}
gap_weird <- gapminder %>% mutate(pop = pop + 1000)
head(gap_weird)
```

---

# `arrange()`

- Reorders the rows in a data frame based on the values of one or more variables
--

```{r}
gapminder %>%
  arrange(year, country)
```

---

# `arrange()`

- Can also put into descending order
--

```{r desc, results="hide"}
gapminder %>%
  filter(year > 2000) %>%
  arrange(desc(lifeExp))
```
--

```{r ref.label="desc", echo=FALSE}
```

---

# Other verbs

## `rename()`

- To change a variable's name in a data frame to a new name
- New name comes before the `=`, old name comes after the `=`
--

```{r}
gap2 <- gapminder
gap2 <- gap2 %>%
  rename(life_exp = lifeExp,
         gdp_per_cap = gdpPercap)
head(gap2, 3)
```


---

# More with `inner_join()`

- Join `by` columns of different names

```{r echo=FALSE}
countries <- readr::read_csv("https://raw.githubusercontent.com/lukes/ISO-3166-Countries-with-Regional-Codes/master/all/all.csv")
countries$name[countries$name == "Bolivia (Plurinational State of)"] <- "Bolivia"
countries$name[countries$name == "Congo"] <- "Congo, Rep."
countries$name[countries$name == "Congo (Democratic Republic of the)"] <- "Congo, Dem. Rep."
countries$name[countries$name == "Hong Kong"] <- "Hong Kong, China"
countries$name[countries$name == "Côte d'Ivoire"] <- "Cote d'Ivoire"
countries$name[countries$name == "Iran (Islamic Republic of)"] <- "Iran"
countries$name[countries$name == "Korea (Democratic People's Republic of)"] <- "Korea, Dem. Rep."
countries$name[countries$name == "Korea (Republic of)"] <- "Korea, Rep."
countries$name[countries$name == "Réunion"] <- "Reunion"
countries$name[countries$name == "Slovakia"] <- "Slovak Republic"
countries$name[countries$name == "Syrian Arab Republic"] <- "Syria"
countries$name[countries$name == "Taiwan, Province of China"] <- "Taiwan"
countries$name[countries$name == "Tanzania, United Republic of"] <- "Tanzania"
countries$name[countries$name == "United Kingdom of Great Britain and Northern Ireland"] <- "United Kingdom"
countries$name[countries$name == "United States of America"] <- "United States"
countries$name[countries$name == "Venezuela (Bolivarian Republic of)"] <- "Venezuela"
countries$name[countries$name == "Viet Nam"] <- "Vietnam"
countries$name[countries$name == "Yemen"] <- "Yemen, Rep."
countries$name[countries$name == "Russian Federation"] <- "Russia"
countries$name[countries$name == "Macedonia (the former Yugoslav Republic of)"] <- "Macedonia, FYR"
countries$name[countries$name == "Micronesia (Federated States of)"] <- "Micronesia, Fed. Sts."
countries$name[countries$name == "Moldova (Republic of)"] <- "Moldova"
countries <- tbl_df(countries) %>%
  select(name, region, `sub-region`) %>% 
  rename(sub_region = `sub-region`)
#readr::write_csv(countries, "docs/countries.csv")
```

```{r}
library(readr)
library(dplyr)
url <- "http://ismayc.github.io/soc301_s2017/countries.csv"
countries <- read_csv(url)
head(countries)
```

---

# More with `inner_join()`

```{r}
new_gap <- inner_join(x = gapminder,
                      y = countries,
                      by = c("country" = "name")) %>% 
  arrange(year) %>% 
  select(-pop, -gdpPercap)
head(new_gap, 10)
```


---

# Work time!

***

## Work on [PS6](../problem-sets/index.html#ps6)

## Ask questions about [DC8](https://campus.datacamp.com/courses/reporting-with-r-markdown)

## Work on [DC9](https://campus.datacamp.com/courses/effective-data-storytelling-using-the-tidyverse/filtering-grouping-summarizing)

## Work on Group Project

---

layout: true

.footer[[Week 06 - Tuesday](https://ismayc.github.io/soc301_s2017/2017/03/07/week-06---tuesday/)]

---

name: week06t
class: center, middle

# Week 06 - Tuesday

# March 7, 2017

***

### Make sure to share your Group Project proposals with me

---

# Follow-up on assignment for today

## Check that R and RStudio installed on your machine

## And all that needed packages are installed

```{r eval=FALSE}
needed_pkgs <- c("nycflights13", "tibble", "dplyr", 
                 "ggplot2", "knitr", "okcupiddata", "dygraphs", 
                 "rmarkdown", "mosaic", "ggplot2movies", 
                 "fivethirtyeight")

new.pkgs <- needed_pkgs[!(needed_pkgs %in% installed.packages())]

if(length(new.pkgs)) {
  install.packages(new.pkgs, repos = "http://cran.rstudio.com")
}
```

---

# Group Options

- If you want to work in a group of four, you can do so BUT you'll need to complete 2 unrelated vignettes.
--

- If you are left in a group of two, I will work with you to set up an assignment that is fair.
--

- Final decisions on group members MUST be made by the end of the day today.  I won't accept any changes in group members after today.
--

- If you have problems contacting your group members, please let me know on Slack as soon as possible.  **Check** SLACK at least once per day!


---


# Group Options

- If you are already having trouble setting up times to meet to work on the Group Project, you are going to have an even harder time going forward.
    - Pick a standard time to meet that works for everyone.
    - I would count a missed group meeting as a failing grade for the project.
--
- You will need to meet outside of class to complete this project.  This could easily include having a Google Hangout video chat as needed.  Further, if you set up tasks appropriately, you may not need to meet in person much.

---

# Set-up Google Drive on your computer

- Click on the link I sent you for your Group Project folder in your email or in the Slack message I sent to your group

    - https://www.google.com/drive/download/
--

- Open the Rproj file in the Google Drive folder on your computer
--

- Make sure that `script.R` opens with RStudio
--

- Try to Knit `group_project.Rmd`

---

# Group Project Deadlines

- Always check [the Group Project Outline](https://ismayc.github.io/soc301_s2017/group_project_outline/index.html) to make sure you are on schedule and more specific deadlines

- March 14 (2:45 PM) - Group Project Draft Due

- March 23 (10:00 AM) - Revised Group Project Due

---

class: center, middle

# Data ~~Manipulation~~ Wrangling

---

## The `gapminder` data frame in the `gapminder` package

```{r}
library(gapminder)
library(dplyr)
glimpse(gapminder)
```

---

## Base R versus the `tidyverse`

- Say we wanted mean life expectancy across all years for Asia
--

```{r}
# Base R
asia <- gapminder[gapminder$continent == "Asia", ]
mean(asia$lifeExp)
```
--
 
```{r}
library(dplyr)
gapminder %>% filter(continent == "Asia") %>%
  summarize(mean_exp = mean(lifeExp))
```

---

## The pipe `%>%`

`r knitr::include_graphics("figure/pipe.png")` &emsp; &emsp; &emsp; `r knitr::include_graphics("figure/MagrittePipe.jpg")`
--

- A way to chain together commands
--

- It is *essentially* the `dplyr` equivalent to the <br> `+` in `ggplot2`

---

# The 5NG of data viz
--

### `geom_point()`<br> `geom_line()` <br> `geom_histogram()`<br>  `geom_boxplot()`<br> `geom_bar()`

---
# The 5MV of data wrangling
### `filter()` <br> `summarize()` <br> `group_by()` <br> `mutate()` <br> `arrange()`

---

# `filter()`

- Allows you to select a subset of the rows of a data frame. 

- The arguments are the "filters" that you'd like to apply.
--

```{r}
library(gapminder); library(dplyr)
gap_2007 <- gapminder %>% filter(year == 2007)
head(gap_2007)
```

---

# Logical operators

- Use `==` to compare a variable to a value
--

```{r eval=FALSE}
library(gapminder); library(dplyr)
gap_2007 <- gapminder %>% filter(year = 2007)
```

```
Error: filter() takes unnamed arguments. Do you need `==`?
```

---

# Logical operators

- Use `|` to check for any in multiple filters being true:
--

```{r eval=FALSE}
gapminder %>% 
  filter(year == 2002 | continent == "Europe")
```
--

```{r echo=FALSE}
gapminder %>% 
  filter(year == 2002 | continent == "Europe")
```

---

# Logical operators

- Use `&` or `,` to check for all of multiple filters being true:
--

```{r eval=FALSE}
gapminder %>% 
  filter(year == 2002, continent == "Europe")
```

```{r echo=FALSE}
gapminder %>% 
  filter(year == 2002, continent == "Europe")
```

---

# Logical operators

- Use `%in%` to check for any being true <br> (shortcut to using `|` repeatedly)
--

```{r eval=FALSE}
gapminder %>% 
  filter(country %in% c("Argentina", "Belgium", "Mexico"),
         year %in% c(1987, 1992))
```
--

```{r echo=FALSE}
gapminder %>% 
  filter(country %in% c("Argentina", "Belgium", "Mexico"),
         year %in% c(1987, 1992))
```


---

# `summarize()`

- Any numerical summary that you want to apply to a column of a data frame is specified within `summarize()`.

```{r eval=FALSE}
max_exp_1997 <- gapminder %>% 
  filter(year == 1997) %>% 
  summarize(max_exp = max(lifeExp))
max_exp_1997
```
--

```{r echo=FALSE}
max_exp_1997 <- gapminder %>% 
  filter(year == 1997) %>% 
  summarize(max_exp = max(lifeExp))
max_exp_1997
```



---

### Combining `summarize()` with `group_by()`

- When you'd like to determine a numerical summary for all
levels of a different categorical variable

```{r eval=FALSE}
max_exp_1997_by_cont <- gapminder %>% 
  filter(year == 1997) %>% 
  group_by(continent) %>%
  summarize(max_exp = max(lifeExp))
knitr::kable(max_exp_1997_by_cont, format = "html")
```

--
```{r echo=FALSE}
max_exp_1997_by_cont <- gapminder %>% 
  filter(year == 1997) %>% 
  group_by(continent) %>%
  summarize(max_exp = max(lifeExp))
knitr::kable(max_exp_1997_by_cont, format = "html")
```

---

class: center, middle

# Finalize Group Project Proposal / Groups

***

# Work on [PS6](../problem-sets/index.html#ps6)

# Work on [DC8](https://campus.datacamp.com/courses/reporting-with-r-markdown)

# Work on [DC9](https://campus.datacamp.com/courses/effective-data-storytelling-using-the-tidyverse/filtering-grouping-summarizing)
---

layout: true

.footer[[Week 05 - Thursday](https://ismayc.github.io/soc301_s2017/2017/03/02/week-05---thursday/)]

---

name: week05th
class: center, middle

# Week 05 - Thursday

# March 2, 2017


---

class: center, middle

# The Process

## DataCamp 

***

--

## RStudio
--

## $\rightarrow$ R script + R Console 

--
## $\rightarrow$ R Markdown


---

class: center, middle

## Analogy

R            |  RStudio |  DataCamp
:-------------------------:|:-------------------------:|:-------------------------:
<img src="figure/engine.jpg" alt="Drawing" style="width: 350px;"/>  |  <img src="figure/dashboard.jpg" alt="Drawing" style="width: 350px;"/>  |  <img src="figure/instructor.jpg" alt="Drawing" style="width: 350px;"/>

---

class: center, middle

# I'm ready to grant you your R driver's license
--

## But, you'll need to continue your tRaining to become an excellent driveR

---

class: center, middle

# R / RStudio / R Markdown DEMO

---

# Diligently work on Group Project

- Determine your group of three
- Look over the `fivethirtyeight` data sets
    - [Reference manual](https://cran.r-project.org/web/packages/fivethirtyeight/fivethirtyeight.pdf)
    - [Listing of all data sets with links to 538 articles](https://cran.r-project.org/web/packages/fivethirtyeight/vignettes/fivethirtyeight.html)
    - Pick two that would be of interest to all group members
    - Review the [Group Project Outline](../group_project_outline/index.html) for further instructions

---

class: center, middle

# To Do for Next time

## Click the link

```{r echo=FALSE, out.width="50%"}
knitr::include_graphics("https://image.freepik.com/free-icon/down-arrow-hand-drawn-sign_318-53286.jpg")
```

---



layout: true

.footer[[Week 05 - Tuesday](https://ismayc.github.io/soc301_s2017/2017/02/28/week-05---tuesday/)]

---

name: week05t
class: center, middle

# Week 05 - Tuesday

# February 28, 2017

***

# Make sure to turn in PS4

---

# Warmup

What code is needed to produce this plot using the `na.omit(flying)` data frame derived from the `fivethirtyeight` package?  Make sure to load all needed libraries.

```{r echo=FALSE, fig.height=5.7, fig.width=11, fig.align='center'}
library(fivethirtyeight)
library(ggplot2)
ggplot(data = na.omit(flying), mapping = aes(x = age, fill = recline_rude)) +
    geom_bar(position = "fill", color = "white")
```


---

# `scale_fill_manual`

- We will use `scale_`s sparingly but they can be nice for customizing your plots more

    - You'll probably want to use them on your Group Project
--

- Let's review how it works on the `bechdel` plot on the  **Showing Off** question you produced in your DataCamp homework.

---

# Build the pieces

```{r include=FALSE}
library(dplyr)
year_bins <- c("70-'74", "75-'79", "80-'84", "85-'89",
               "90-'94", "95-'99", "00-'04", "05-'09",
               "10-'13")
bechdel <- bechdel %>%
  mutate(five_year = cut(year, 
                         breaks = seq(1969, 2014, 5), 
                         labels = year_bins)) %>% 
  mutate(clean_test = factor(clean_test, 
                             levels = c("nowomen", "notalk", "men", "dubious", "ok")))
```


```{r fig.width=11, fig.height=5.5}
library(fivethirtyeight)
library(ggplot2)
ggplot(data = bechdel, mapping = aes(x = five_year)) +
  geom_bar(position = "fill")
```

---

# Build the pieces

```{r fig.width=11, fig.height=5.5}
ggplot(data = bechdel, mapping = aes(x = five_year, 
                                     fill = clean_test)) +
  geom_bar(position = "fill")
```

---

# Build the pieces

```{r fig.width=11, fig.height=5.5}
ggplot(data = bechdel, mapping = aes(x = five_year, 
                                     fill = clean_test)) +
  geom_bar(position = "fill", color = "white")
```

---

```{r fig.width=11, fig.height=5.5}
ggplot(data = bechdel, mapping = aes(x = five_year, 
                                     fill = clean_test)) +
  geom_bar(position = "fill", color = "white") +
  scale_fill_manual(values = 
      c("#FF2603", "#FF937F", "#FEC9C3", "#6AB4DA", "#018ED5"))
```

Identified colors from the `bechdel` 538 [image](https://espnfivethirtyeight.files.wordpress.com/2014/04/hickey-bechdel-11.png?quality=90&strip=all&w=1150&ssl=1) at http://imagecolorpicker.com/

---

### Could also...

```{r fig.width=11, fig.height=5.5}
ggplot(data = bechdel, mapping = aes(x = five_year, 
                                     fill = clean_test)) +
  geom_bar(position = "fill", color = "black") +
  scale_fill_manual(values = 
      c("navy", "blanchedalmond", "brown", "gray87", "lawngreen"))
```


---

class: center, middle

# Review [PS4 Discussion](https://ismayc.github.io/soc301_s2017/problem-sets/ps-key/index.html#ps4-key)

---

class: center, middle

# Plicker time!

## Let's take [last semester's Quiz 2](https://ismayc.github.io/soc301_s2017/slides/Quiz2.pdf)

---

class: center, middle

# Discussion

## Why am I using DataCamp?

--

### How does this material apply to your everyday life?  To your major?  To the world as a whole?

---

class: center, middle

# Review Q & A

- Get into groups and identify questions you have that you aren't sure about with the material from Chapters 3 and 4

- If you have no questions, take someone else's practice quiz

---

class: center, middle

# Check the post for the [day!](https://ismayc.github.io/soc301_s2017/2017/02/28/week-05---tuesday/)

---

class: middle, center

# Minute paper

### Write down as much information as you can about what you have learned about using `ggplot2` for graphics

---

layout: true

.footer[[Week 04 - Thursday](https://ismayc.github.io/soc301_s2017/2017/02/23/week-04---thursday/)]

---

name: week04th
class: center, middle

# Week 04 - Thursday

# February 23, 2017

---

# Warmup - Old Exam Question

- Recall the `gap2007` data frame derived from the `gapminder` data frame in the `gapminder` package we worked with last week.  (Assume that `gap2007` has been created and loaded for you.)
- Write the code to produce an appropriate plot looking at the distribution of `gdpPercap` in `gap2007`. 
    - Change the color of the inside of the plotted values and the border of the plotted values.

---

class: center, middle

# [DataCamp Demo](http://bit.ly/stats-sandbox)

---

class: center, middle

# Warmup in groups

### Discuss the difference between the `binwidth` and the `bins` arguments to `geom_histogram`

---

class: split-50

## The `library` function

- Loads a package that contain functions and/or data

### At this point in the course you should only be adding these packages

### <u>For functions</u>
`library(tibble)`<br>
`library(ggplot2)`<br>
`library(dplyr)`

### <u>For data</u>
`library(nycflights13)`<br>
`library(fivethirtyeight)`<br>
`library(gapminder)`

---

# Reviewing `ggplot2` syntax

```{r eval=FALSE}
library(________(1)_____________)
ggplot(data = ______(2)___________,
       mapping = aes(x = ________(3)___________,
                     y = ________(4)___________)) +
  geom_ _____(5)______() +
  facet_grid(facets = _______(6)___________)

```

--

### Notes

- Remember that faceting is setting up a formula so it needs a `~`.  You'll get an error without it.
- Note that the `+` must appear at the end of the line of code NOT at the beginning.

---


## Time slept vs day of the week for ONE professor over 100 weeks

<img src="figure/box.jpg"  width="900" height="350" alt="Sleep Boxplot">

- What does this plot tell you/what story does it tell?

---

class: center, middle

# [Reviewing Problem Set 3 Discussion](https://ismayc.github.io/soc301_s2017/problem-sets/ps-key/index.html#ps3-key)

---

## Types of variables & appropriate plots (so far)

- One numerical variable
--

    - Histogram: `geom_histogram()`
--
- Categorical explanatory & numerical response variable
--

    - Boxplot: `geom_boxplot()`
    - Faceted histogram: <br>`geom_histogram() + facet_grid( ~ _______)`
--
- Numerical explanatory & response variables
--

  - Scatter-plot: `geom_point()`
  - Line-graph: `geom_line()`

---

## Recall creating a histogram from a frequency table

Bin     | Count
--------|-------
(9-15] | 4
(15-21] | 2

```{r include=FALSE}
library(tibble)
numeric_var <- c(10, 12, 14, 15, 18, 21)
hist_example <- data_frame(numeric_var)
hist_example
```


```{r fig.height=4}
library(ggplot2)
ggplot(data = hist_example, mapping = aes(x = numeric_var)) +
  geom_histogram(binwidth = 6, color = "black", fill = "white")
```

---

- We are interested in the distribution of SOC 301 by grade.

```{r}
class <- c(rep("Sophomore", times = 6),
           rep("Junior", times = 13),
           rep("Senior", times = 8))
class <- factor(class, levels = c("Sophomore", "Junior", "Senior"))
class_df <- tibble::data_frame(class)
class_df
```

- Create a frequency table for this data on paper

---

- Sketch a plot based on this frequency table

class    | Count
--------|-------
Sophomore | 6
Junior | 13
Senior | 8

--

```{r fig.height=4}
library(ggplot2)
ggplot(data = class_df, mapping = aes(x = class)) +
  geom_bar(fill = "lightgreen", color = "black")
```

---

# For aggregated data, use `geom_col`

```{r}
class <- factor(c("Sophomore", "Junior", "Senior"), 
                levels = c("Sophomore", "Junior", "Senior"))
count <- c(6, 13, 8)
class_freq <- tibble::data_frame(class, count)
class_freq
```
---

name: geomcol

# For aggregated data, use `geom_col`

```{r}
ggplot(data = class_freq, mapping = aes(x = class, y = count)) +
  geom_col(fill = "lightgreen", color = "black")
```

---

# What about for two categorical variables?

1. Stacked barplot
--

2. Side-by-side barplot
--

3. Faceted barplot
--

4. Stacked proportional plot
  - Preferred if <br> number of groups in the second variable $\le 3$
  
---

## What code is needed to produce this plot?

- This is using the `profiles` data frame in the `okcupiddata` package.

```{r echo=FALSE}
library(okcupiddata)
library(ggplot2)
ggplot(data = profiles, mapping = aes(x = orientation)) +
  geom_bar()
```

---

# Stacked barplot

- Uses `fill` to change the colors of the bars of the `x` variable based on the values of another variable
--

- What code is needed to produce this plot?

```{r echo=FALSE}
library(okcupiddata)
library(ggplot2)
ggplot(data = profiles, mapping = aes(x = orientation)) +
  geom_bar(aes(fill = smokes))
```


---

# Side-by-side barplot

- Uses `position = "dodge"` to place the bars next to each other for each group of the `x` variable
--

- What code is needed to produce this plot?

```{r echo=FALSE, fig.width=11}
library(okcupiddata)
library(ggplot2)
ggplot(data = profiles, mapping = aes(x = orientation)) +
  geom_bar(position = "dodge", mapping = aes(fill = smokes))
```

---

# Faceted barplot

- Uses `facet_wrap()` or `facet_grid()` to make small multiples of the plot
--

- What code is needed to produce this plot?

```{r echo=FALSE, fig.width=11}
library(okcupiddata)
library(ggplot2)
ggplot(data = profiles, mapping = aes(x = orientation)) +
  geom_bar() +
  facet_wrap(facets = ~ smokes)
```

---

# Stacked proportional barplot

- Uses `position = "fill"` to show the percentage of the `fill` variable for each group of `x`
--

- What code is needed to produce this plot?

```{r echo=FALSE, fig.width=11}
library(okcupiddata)
library(ggplot2)
ggplot(data = profiles, mapping = aes(x = orientation, fill = smokes)) +
  geom_bar(position = "fill", color = "white")
```


---

class: center, middle

# [Basic Data Visualization mindmap](https://coggle.it/diagram/V_G2gzukTDoQ-aZt-)

---

class: center, middle

# The [`ggplot2` Cheatsheet](https://www.rstudio.com/wp-content/uploads/2016/11/ggplot2-cheatsheet-2.1.pdf) 

---

## Start looking over [`fivethirtyeight` data sets](https://cran.r-project.org/web/packages/fivethirtyeight/vignettes/fivethirtyeight.html) to find an interesting one for your Group Project
  - All the data sets are available in the [sandbox](http://bit.ly/stats-sandbox) for you to explore
  - I recommend you scan the table for topics you may be interested in
  - Then scan the 538 articles and narrow it down to 2-4 that interest you and your group-mates (groups of 3)

---

class: center, middle

# Finish [Problem Set 4](https://ismayc.github.io/soc301_s2017/problem-sets/#ps4) in groups

## Due Tuesday at the beginning of class

***

## [DC5: Barplots](https://campus.datacamp.com/courses/effective-data-storytelling-using-the-tidyverse/barplots?ex=1) due on Tuesday at 1 PM

## [PS5](https://ismayc.github.io/soc301_s2017/problem-sets/index.html#ps5) due on Tuesday at 1 PM

***

# Quiz 2 over Chapters 3 and 4 of [ModernDive](http://moderndive.com) is on Thursday, March 2!

---


layout: true

.footer[[Week 04 - Tuesday](https://ismayc.github.io/soc301_s2017/2017/02/21/week-04---tuesday/)]

---

name: week04t
class: center, middle

# Week 04 - Tuesday

# February 21, 2017

---

class: center, middle

# Turn in Problem Set 3

***

### Also note that a short link for the course page is <br> http://bit.ly/soc-301

### My office is now Marsh 213

### Useful tip:  Take notes on where R functions are introduced in the book and in DataCamp
---

# Warmup

Write the code necessary to produce the last plot using the `US_births_2014` data frame from the [Scatter-plots and Line-graphs](https://campus.datacamp.com/courses/effective-data-storytelling-using-the-tidyverse/scatter-plots-line-graphs?ex=4) chapter of DataCamp:


```{r echo=FALSE, fig.height=6, fig.width=11}
library(ggplot2)
library(fivethirtyeight)
library(dplyr)
US_births_2014 <- US_births_2000_2014 %>% filter(year == 2014)
ggplot(data = US_births_2014,
       mapping = aes(x = date,
           y = births)) +
  geom_point(aes(color = day_of_week)) 
```

---

# Discuss in groups of three

- What stands out to you when you look at this plot?  In other words, what stories could be told by observing this data?

```{r echo=FALSE, fig.height=5.3, fig.width=11}
library(ggplot2)
library(fivethirtyeight)
library(dplyr)
library(plotly)
US_births_2014 <- US_births_2000_2014 %>% filter(year == 2014)
ggplot(data = US_births_2014,
       mapping = aes(x = date,
           y = births)) +
  geom_point(aes(color = day_of_week)) 
```

---

class: center, middle

# Histogram Basics

---

### Consider the following numerical data frame

```{r eval=FALSE}
library(dplyr)
numeric_var <- c(10, 12, 14, 15, 18, 21)
hist_example <- data_frame(numeric_var)
hist_example
```

--

```{r echo=FALSE}
library(dplyr)
numeric_var <- c(10, 12, 14, 15, 18, 21)
hist_example <- data_frame(numeric_var)
hist_example
```


- Place the data into two bins of size 6
- Then produce a table showing how many data points fall in each bin

---

### Sketch a plot of this frequency table

Bin     | Count
--------|-------
(9-15] | 4
(15-21] | 2

--

```{r fig.height=4}
library(ggplot2)
ggplot(data = hist_example, mapping = aes(x = numeric_var)) +
  geom_histogram(binwidth = 6, color = "black", fill = "white")
```

---

class: center, middle

# Recall that a statistical graphic is

## A <small>`mapping`</small> of <br> <small>`data`</small> variables


## to <br> <small>`aes()`</small>thetic attributes


## of <br> <small>`geom_`</small>etric objects.

---

## Practice in pairs

- Write the code to produce a histogram of the humidity recordings in the [<small>`weather`</small> data frame](https://ismayc.github.io/Effective-Data-Storytelling-using-the-tidyverse/moderndive.html#weather) from the <small>`nycflights13`</small> package 
  - with a bin width of 15, 
  - white border color, and 
  - fill with the [color of your choosing](http://www.stat.columbia.edu/~tzheng/files/Rcolor.pdf).
- Practice in the DataCamp sandbox at <br> http://bit.ly/stats-sandbox

--

```{r include=FALSE}
library(nycflights13)
library(ggplot2)
ggplot(data = weather, mapping = aes(x = humid)) +
  geom_histogram(binwidth = 15, color = "white", fill = "goldenrod")
```

- THINK ABOUT IT: What does this plot tell us?

---

# Faceting

- Oftentimes, we'd like to produce a small multiple of the same plot across the levels of a different variable. Suppose we'd like to look at the plot created on the last slide *across* the different <small>`origin`</small> airports.
--

  - Use the code given in Section 4.6 of [ModernDive](https://ismayc.github.io/moderndiver-book/4-viz.html#facets) and the plot you created on the last slide.
  - Write down your code on paper and test in the [sandbox](http://bit.ly/stats-sandbox)

```{r include=FALSE}
library(nycflights13)
library(ggplot2)
ggplot(data = weather, mapping = aes(x = humid)) +
  geom_histogram(binwidth = 15, color = "white", fill = "goldenrod") +
  facet_wrap(facets = ~ origin)
```
--

- THINK ABOUT IT: What does this faceted plot tell us?

---

# Faceting

- Write the code to produce the plot below

```{r echo=FALSE, fig.height=6, fig.width=11}
library(nycflights13)
library(ggplot2)
ggplot(data = weather, mapping = aes(x = humid, fill = origin)) +
  geom_histogram(binwidth = 15, color = "white") +
  facet_wrap(facets = ~ origin)
```

---

# Another way to <small>`facet`</small>

```{r fig.height=5, fig.width=11}
library(nycflights13); library(ggplot2)
ggplot(data = weather, mapping = aes(x = humid, fill = origin)) +
  geom_histogram(bins = 5, color = "white") + # NOTE bins here
  facet_grid(facets = origin ~ .)
```

---

# Explanatory and Response Variables

### Suppose we were interested in investigating the humidity throughout 2013 across the airports in NYC.

- What would be the explanatory and response variables?

- Note there is only one correct answer here.

---

# Boxplots

- Another way to view the relationship between a categorical explanatory variable and a numerical response variable is via a boxplot.  Think about how we might write the code to produce the boxplot for humidity across airports.

```{r echo=FALSE, fig.height=4}
library(nycflights13)
library(ggplot2)
ggplot(data = weather, mapping = aes(x = origin, y = humid)) +
  geom_boxplot()
```

---

class: center, middle

# Recall that a statistical graphic is

## A <small>`mapping`</small> of <br> <small>`data`</small> variables


## to <br> <small>`aes()`</small>thetic attributes


## of <br> <small>`geom_`</small>etric objects.

---

name: box

## Another boxplot example

### Time slept versus day of the week for a college professor

<img src="figure/box.jpg"  width="900" height="300" alt="Sleep Boxplot">

- What does this plot tell you/what story does it tell?

---

class: center, middle

# Work on [Problem Set 4](https://ismayc.github.io/soc301_s2017/problem-sets/#ps4) in groups

## Due on Thursday at the end of class



***

## [DC4: Histograms & Boxplots chapter](https://campus.datacamp.com/courses/effective-data-storytelling-using-the-tidyverse/histograms-boxplots?ex=1) due on Thursday at 1 PM

***

# Quiz 2 over Chapters 3 and 4 of [ModernDive](http://moderndive.com) is on Thursday, March 2!

---

# Minute paper

### Write the code necessary to produce this plot from earlier in class.  

- <small>Make sure to load all needed packages!</small>


```{r echo=FALSE, fig.height=5, fig.width=11}
library(nycflights13)
library(ggplot2)
ggplot(data = weather, mapping = aes(x = origin, y = humid)) +
  geom_boxplot()
```

---

layout: true

.footer[[Week 03 - Thursday](https://ismayc.github.io/soc301_s2017/2017/02/16/week-03---thursday/)]

---

name: week03th
class: center, middle

# Week 03 - Thursday

# February 16, 2017

---

name: warmup

# Warmup

### Is this data frame showing [average total fertility by country by year (since 1945)](http://ismayc.github.io/Effective-Data-Storytelling-using-the-tidyverse/total_fertility.html) a tidy data frame?  

```{r echo=FALSE, message=FALSE}
library(tidyverse)
total_fertility <- readr::read_csv("data/total_fertility.csv") 
colnames(total_fertility)[1] <- "country"
total_fertility <- total_fertility %>% 
  select(country, `1945`:`2015`) %>% 
  na.omit()
knitr::kable(head(select(total_fertility, country, `1945`:`1956`), 3), format = "html")
```


- <small>If so, what is the observational unit and what are the variables?</small>
- <small>If not, what would three rows of a tidy data set look like with variable names at the top?</small>


Source: Original data from [Gapminder](https://www.gapminder.org/data/), [Google Sheet with explanations](https://docs.google.com/spreadsheets/d/1oq3r8W7ajenKFgoAYoOf2MXeTWWNPpudR-Fo5m2-o30/pub?gid=0)

<small>[Why is tidy data important?](#whytidy) slide<small>

---

class: middle, center

## Reviewing <small>`inner_join`</small>

### [DataCamp problem](https://campus.datacamp.com/courses/effective-data-storytelling-using-the-tidyverse/tidy-data?ex=4)

---


class: center, middle

# What is a statistical graphic?


---

# Grammar of Graphics

### Wilkinson (2005) laid out the proposed "Grammar of Graphics"

```{r echo=FALSE, fig.align='center'}
knitr::include_graphics("figure/graphics.jpg")
```


---

# Grammar of Graphics in R

### Wickham implemented the grammar in R in the `ggplot2` package

```{r echo=FALSE, fig.align='center'}
knitr::include_graphics("figure/ggplot2.jpg")
```


---

class: center, middle

# But...what is a statistical graphic?
--

## A <small>`mapping`</small> of <br> <small>`data`</small> variables
--

## to <br> <small>`aes()`</small>thetic attributes

--
## of <br> <small>`geom_`</small>etric objects.

---

class: center, middle

# Back to basics

---

### Consider the following data in tidy format:

```{r echo=FALSE}
simple_ex <-
  data_frame(
    A = c(1, 2, 3, 4),
    B = c(1, 2, 3, 4),
    C = c(3, 2, 1, 2),
    D = c("a", "a", "b", "b")
  )
simple_ex %>% knitr::kable(format="html")
```


- Sketch the graphics below on paper, where the `x`-axis is variable `A` and the `y`-axis is variable `B`

1. <small>A scatter plot</small>
1. <small>A scatter plot where the `color` of the points corresponds to `D`</small>
1. <small>A scatter plot where the `size` of the points corresponds to `C`</small>
1. <small>A line graph</small>
1. <small>A line graph where the `color` of the line corresponds to `D`</small>


---

## Reproducing the plots in <small>`ggplot2`</small>

### 1. A scatterplot

```{r, eval=FALSE}
library(ggplot2)
ggplot(data = simple_ex, mapping = aes(x = A, y = B)) + 
  geom_point()
```
--

```{r, echo=FALSE, fig.height=4.5}
ggplot(data = simple_ex, aes(x = A, y = B)) + 
  geom_point()
```


---


## Reproducing the plots in <small>`ggplot2`</small>

### 2. A scatter plot where the `color` of the points corresponds to `D`

```{r, eval=FALSE}
library(ggplot2)
ggplot(data = simple_ex, mapping = aes(x = A, y = B)) + 
  geom_point(aes(color = D))
```
--

```{r, echo=FALSE, fig.height=4.5}
ggplot(data = simple_ex, mapping = aes(x = A, y = B)) + 
  geom_point(aes(color = D))
```


---

## Reproducing the plots in <small>`ggplot2`</small>

### 3. A scatter plot where the `size` of the points corresponds to `C`

```{r, eval=FALSE}
library(ggplot2)
ggplot(data = simple_ex, mapping = aes(x = A, y = B, size = C)) + 
  geom_point()
```
--

```{r, echo=FALSE, fig.height=4.5}
ggplot(data = simple_ex, mapping = aes(x = A, y = B, size = C)) + 
  geom_point()
```


---

## Reproducing the plots in <small>`ggplot2`</small>

### 4. A line graph

```{r, eval=FALSE}
library(ggplot2)
ggplot(data = simple_ex, mapping = aes(x = A, y = B)) + 
  geom_line()
```
--

```{r, echo=FALSE, fig.height=4.5}
ggplot(data = simple_ex, aes(x = A, y = B)) + 
  geom_line()
```


---

## Reproducing the plots in <small>`ggplot2`</small>

### 5. A line graph where the `color` of the line corresponds to `D`

```{r, eval=FALSE}
library(ggplot2)
ggplot(data = simple_ex, mapping = aes(x = A, y = B, color = D)) + 
  geom_line()
```
--

```{r, echo=FALSE, fig.height=4.5}
ggplot(data = simple_ex, aes(x = A, y = B, color = D)) + 
  geom_line()
```

---

name: whytidy

## Why is tidy data important?

- Think about trying to plot total fertility across years in the simplest way possible with the data on [Warmup slide](#warmup).
--

- It would be much easier if the data looked like what follows instead so we could put <small>`year`</small> on the <small>`x`</small>-axis and <small>`fert`</small> on the <small>`y`</small>-axis.

```{r echo=FALSE, message=FALSE}
total_fertility <- readr::read_csv("data/total_fertility.csv") 
colnames(total_fertility)[1] <- "country"
total_fertility <- total_fertility %>% 
  select(country, `1945`:`2015`) %>% 
  na.omit()
set.seed(3)
total_fert_tidy <- total_fertility %>% 
  sample_n(6) %>% 
  gather(-country, key = "year", value = "fert") %>% 
  mutate(year = as.numeric(year)) 
total_fert_tidy %>% 
  sample_n(6) %>% 
  arrange(country) %>% 
  knitr::kable(format = "html")
```

---

## Making a scatterplot

```{r fig.height=5.5}
library(ggplot2)
ggplot(data = total_fert_tidy, mapping = aes(x = year, y = fert)) +
  geom_point()
```


---

## Discussing the scatterplot

```{r echo=FALSE, fig.width=11, fig.height=5.5}
library(ggplot2)
ggplot(data = total_fert_tidy, mapping = aes(x = year, y = fert)) +
  geom_point()
```

- What stands out to you as you look at this plot?
- What other information would be useful here?


---

## Identifying the countries

```{r echo=FALSE}
total_fert_tidy %>% distinct(country) %>% ungroup() %>% 
  arrange(country) %>% knitr::kable(format = "html")
```

--

- How could we identify the countries on the plot?
--

- This is another reason why *tidy data* is so valuable.  <br> Check this out!

---

## Color by country

```{r fig.width=11, fig.height=5.5}
library(ggplot2)
ggplot(data = total_fert_tidy, 
       mapping = aes(x = year, y = fert, color = country)) +
  geom_point()
```

---

## Shape by country

```{r fig.width=11, fig.height=5.5}
library(ggplot2)
ggplot(data = total_fert_tidy, 
       mapping = aes(x = year, y = fert, shape = country)) +
  geom_point()
```

---

## Color and shape by country

```{r fig.width=11, fig.height=5}
library(ggplot2)
ggplot(data = total_fert_tidy, 
       mapping = aes(x = year, y = fert, 
                     color = country, shape = country)) +
  geom_point()
```

---

class: center, middle

# Shifting back to the data from [Hans Rosling's video](https://www.youtube.com/watch?v=jbkSRLYSojo) we watched yesterday

---

## The <small>`gapminder`</small> package and data frame

```{r}
library(gapminder)
data(gapminder)
glimpse(gapminder)
```

***

```{r echo=FALSE}
head(gapminder, 4) %>% knitr::kable(format = "html")
```


---

## Looking only at 2007

- This code will be covered more in [Chapter 5 of ModernDive](https://ismayc.github.io/moderndiver-book/5-manip.html)


```{r}
library(dplyr)
gap2007 <- gapminder %>% filter(year == 2007)
head(gap2007, n = 10)
```

---

## What code is needed to produce this plot?

- Write the code on paper and then discuss in groups of 3.

```{r echo=FALSE, fig.height=3.5}
ggplot(data = gap2007, mapping = aes(x = gdpPercap, y = lifeExp)) +
  geom_point()
```

--

- There are `r nrow(total_fertility)` countries included here.  What would be a different/better way we could highlight points than by country
that would be of interest here?

---

## Coloring by `continent`

- Write the code on paper and then discuss in groups of 3.

```{r echo=FALSE, fig.height=5}
ggplot(data = gap2007, mapping = aes(x = gdpPercap, y = lifeExp)) +
  geom_point(aes(color = continent))
```
--

- What information is added by the coloring here?

---

class: center, middle

# Work on [Problem Set 3](https://ismayc.github.io/soc301_s2017/problem-sets/#ps3) in groups

## Due Tuesday at the beginning of class

***

## [DC3: Scatter-plots & Line-graphs chapter](https://campus.datacamp.com/courses/effective-data-storytelling-using-the-tidyverse/scatter-plots-line-graphs?ex=1) due on Tuesday at 1 PM

---

## DataCamp notes

- Leaderboard not available currently

- Complete your DataCamp profiles!
    - Click on your user ID in the top right of the screen when you first open DataCamp.
    - Click on My Profile.
    - Select Edit Account Settings.
    - Input at the very least your first and last name.  More helpful if you include a picture.

---

## Minute Paper - Put your name on it!

What `ggplot2` code is needed to produce this plot? The `simple_ex` data frame is printed for support. 

```{r echo=FALSE, fig.height=3.5, fig.align="center"}
simple_ex <-
  data_frame(
    A = c(1, 2, 3, 4),
    B = c(1, 2, 3, 4),
    C = c(3, 2, 1, 2),
    D = c("a", "a", "b", "b")
  )
simple_ex %>% knitr::kable(format = "html")
ggplot(data = simple_ex, mapping = aes(x = A, y = B)) + 
  geom_point(aes(color = D))
```

---

layout: true

.footer[[Week 03 - Tuesday](https://ismayc.github.io/soc301_s2017/2017/02/14/week-03---tuesday/)]

---

name: week03t
class: center, middle

# Week 03 - Tuesday

# February 14, 2017

---

# Warmup

### Take out a (half) sheet of paper

- What are the three properties of a tidy data set?

---

class:center, middle

# Happy Valentine's Day!

[![](https://imgs.xkcd.com/comics/boyfriend.png)](https://xkcd.com/539/)

---

# Questions/concerns about class

- What is the longest assignment we will be given?
--

- Eventually are we going to write our own code to solve problems?
--

- What are good ways to practice programming without DataCamp?
--

- How do you format your exams?

---

# Questions/concerns about class

- If I get questions wrong many times before I get it right on DataCamp, will this hurt my grade?
--

- I worry I don't actually know what I'm doing.
--

- More details about the project.
--

- Does `?`/`help()` only work with explaining functions?

---

## Studying well and efficiently

- Image from [_Teach Students How to Learn_](https://www.amazon.com/Teach-Students-How-Learn-Metacognition/dp/162036316X)

### <http://ismayc.github.io/soc301_s2017/img/studentlearn.jpg>

---

# Some clarifications

- Telling me early that you will be gone on a day in the future is NOT an excused absence
   - You can miss class three times for whatever you wish
   - You need institutional excuse to miss more than three
--

- Just doing the homework is not enough to build sufficient understanding
   - You need to go back over DataCamp, the Learning Checks, and the book on your own to check for understanding
   
---

# Some clarifications   
   
-  I'm not trying to scare you, but quizzes and exams will be HARD and you will struggle if you don't
follow what I am telling you.
  - If you follow the effective learning strategies I have shown you and devote yourself to practice, you'll do great AND you'll retain the material.
  - You'll find that you'll actually be studying LESS, since you won't have to re-learn all the material and cram for exams/quizzes.


---

class: center, middle

# Review [Problem Set 2 Discussion](https://ismayc.github.io/soc301_s2017/problem-sets/ps-key/index.html#ps2-key)

---

class: center, middle

# Plickers for Review

---

# Important R functions/operators from [Chapter 3](https://ismayc.github.io/moderndiver-book/3-tidy.html)

- `library()` (VERY IMPORTANT)
--

- `<-`
--

- `glimpse()`
--

- `?`
--

- `inner_join()`

---

# What is meant by "joining data frames" and why is it useful?

--

```{r echo=FALSE, fig.align='center'}
knitr::include_graphics("https://ismayc.github.io/moderndiver-book/images/join-inner.png")
```


---

# Do joins change the observational unit?

--


### View [`police_locals`](https://ismayc.github.io/Effective-Data-Storytelling-using-the-tidyverse/police_locals.html)
### View [`ideology`](https://ismayc.github.io/Effective-Data-Storytelling-using-the-tidyverse/ideology.html)

- Join based on `"city"`

---

# Do joins change the observational unit?


```{r eval=FALSE, message=FALSE, warning=FALSE}
library(fivethirtyeight); library(dplyr); library(readr)
data(police_locals)
ideology <- read_csv("http://bit.ly/ideology-csv")
police_join <- inner_join(x = police_locals, y = ideology, 
                          by = "city")
```

### View [`police_join`](https://ismayc.github.io/Effective-Data-Storytelling-using-the-tidyverse/police_join.html)

---

class: center, middle

## THINK ABOUT IT

###  How does linking these two data sets together help in analyzing the relationship between `state_ideology` and percentage of police officers residing in the cities they serve by race?

---

# Shifting to [Data Viz](https://ismayc.github.io/moderndiver-book/4-viz.html)

<div class="videoWrapper">
```{r echo=FALSE}
library("htmltools")
library("vembedr")
embed_url("https://www.youtube.com/watch?v=jbkSRLYSojo")
```
</div>

---

## Grade Viewer is up

### <http://ismay.shinyapps.io/soc301_grades>

- Also available on the [course page](http://ismayc.github.io/soc301_s2017) under Resources

---

class: center, middle

# Work on [Problem Set 3](https://ismayc.github.io/soc301_s2017/problem-sets/#ps3) in groups

## Due on Thursday at the end of class

***

## [DC2: Tidy Data chapter](https://campus.datacamp.com/courses/effective-data-storytelling-using-the-tidyverse/tidy-data?ex=1) due on Thursday at 1 PM

---

# Minute Paper

### (Half sheet of paper is fine.  Share with your neighbor.  Make sure to put your name on it!)

- What are the three characteristics of tidy data?
- How did Hans Rosling use data visualization to help tell the story he wanted to tell in the video we watched?


---

layout: true

.footer[[Week 02 - Thursday](https://ismayc.github.io/soc301_s2017/2017/02/09/week-02---thursday/)]

---

name: week02th
class: center, middle

# Week 02 - Thursday

# February 9, 2017

---

class: center, middle

## Learning Quote of the Day

```{r echo=FALSE}
knitr::include_graphics("figure/hadley.png")
```

---

class: center, middle

# Take Notes!

---

## Tidy Data

<img src="figure/tidy-1.png" alt="Drawing" style="width: 750px;"/>

---

## Is this tidy?

```{r echo=FALSE, message=FALSE, warning=FALSE}
library(tidyverse)
dem_score <- read_csv("data/dem_score.csv")
dem_score
```

---

## Beginning steps

### Frequently the first thing you should do when given a dataset is to
- check that the data is *tidy*,
- identify the observational unit,
- specify the variables, and
- give the types of variables you are presented with.
### This will help you with 
- choosing the appropriate plot, 
- summarizing the data, and 
- understanding which inferences can be applied.

---

## What is Tidy Data?

<img src="http://garrettgman.github.io/images/tidy-1.png" alt="Drawing" style="width: 600px;"/>

1. Each variable forms a column.
2. Each observation forms a row.
3. Each type of observational unit forms a table.

### The third point means we don't mix apples and oranges, keep apples together with apples.

---

## What is Tidy Data?

1. Each observation forms a row. In other words, each row corresponds to a single *observational unit*
1. Each variable forms a column:
    + Some of the variables may be used to identify the *observational units*. For organizational purposes, it's generally better to put these in the left-hand columns
    + Some of the variables may be *observed values* associated with each observational unit
1. Each type of observational unit forms a table.

---

## What is Tidy Data?

### This is just a spreadsheet! 

### But we are very strict about the previous three rules.

---

## [nycflights13 Package](http://github.com/hadley/nycflights13)

- Loaded via `library(nycflights13)`

- Contains
information about all flights that departed from NYC in
2013: 336,776 flights in total. 

---

## [nycflights13 Package](http://github.com/hadley/nycflights13)

- To help understand what causes delays, it also
includes a number of other useful datasets: <small>
    * `weather`: hourly meterological data for each airport
    * `planes`: construction information about each plane
    * `airports`: airport names and locations
    * `airlines`: translation between two letter carrier codes and names

### All of these data frames are available for viewing [here](https://ismayc.github.io/Effective-Data-Storytelling-using-the-tidyverse/moderndive.html).

---

class: center, middle

# Work on [Problem Set 2](https://ismayc.github.io/soc301_s2017/problem-sets/)

---

## Minute Paper

### (Half sheet of paper is fine.  Share with your neighbor.)

- What are the three characteristics of tidy data?
- Draw the DATA diagram that was presented on the board in all previous classes.

---

name: week02t
layout: true

.footer[[Week 02 - Tuesday](https://ismayc.github.io/soc301_s2017/2017/02/07/week-02---tuesday/)]

---

class: center, middle

# Week 02 - Tuesday

# February 7, 2017

---

## Sample quiz question

<center>
`r knitr::include_graphics("figure/jeopardy.png", dpi = 300)`
</center>

<center>
`r knitr::include_graphics("figure/jq.png", dpi = 200)`
</center>

---

## Asking for help

- Recommended:  Post your problem and drag a screenshot image of what you have tried to the #general channel on Slack.
- If you know the answer to a question there, please attempt to answer it.  It will help you learn!
- Send me a private message on Slack (@chester)
- Discuss your problems with the tutors in person
- Last resort, send the tutors a private message on Slack

---

## You Should Learn to Program


<div class="videoWrapper">
```{r echo=FALSE}
library("htmltools")
library("vembedr")
embed_url("https://www.youtube.com/watch?v=xfBWk4nw440&t=7s")
```
</div>

---

## Easy classes are worthless classes

- You won't retain any of the material covered
--

- You or someone else pays good money for you to get a good education here
--

- I want to do everything in my power to help you learn this material as I see it as THE MOST IMPORTANT class you can take as an undergraduate.
--

- You have many misconceptions about how you learn best.  That's not your fault, but habits must be broken.
--

- Can we build muscles sitting on the couch?

---

## Why are you learning R?

- ~~Because I enjoy partaking in [Schadenfreude](https://en.wikipedia.org/wiki/Schadenfreude)~~

<center>
`r knitr::include_graphics("figure/google_scholar.png", dpi = 110)`
</center>

---

## Why are you learning R?

- R is free, R improves, R has existed for 40+ years
- You can show what you have learned to a potential employer easily
- I want to prepare you for the real world as best as I can and make you more employable than your competitors

---

## Why are you learning R?

- R will save you TONS of time in the long run. Long term thinking is key.
    - You can easily tweak your code if you need to do another analysis
    - Remembering what drop-down menu some thing is in two years from now in a different program will be hard

---

class: center, middle

# Reviewing R basics <br> (on chalkboard)

---

## Key R functions/operators going forward

### Operators

- `<-`
- `[]`
- `[ , ]`
- `$` (VERY IMPORTANT)
- `:`
- `<`, `>`, `<=`, `>=`
- `==`, `!=`
- `?`

---

## Key R functions/operators going forward

### Functions

- `names()`
- `c()`
- `sum()`
- `mean()`
- `factor()`
    - `factor( , order = TRUE, levels = c( , , )`)
- ~~`str()`~~ `tibble::glimpse()`

---

## How should you prepare for the quiz?

<div class="videoWrapper">
```{r echo=FALSE}
embed_url("https://www.youtube.com/watch?v=CPxSzxylRCI")
```
</div>

---

## How should you prepare for the quiz?

- [Advice from former students](http://ismayc.github.io/soc301_s2017/advice_from_former/index.html)

- Practice!

---

## Get into groups of 3 or 4

- Pass your multiple choice questions to someone else in your group
    - Take the "quiz" with no notes
    - Discuss your answers with your group
    - Take another "quiz"
    - Rinse and repeat

---

class: middle, center

# Check the [webpage](https://ismayc.github.io/soc301_s2017/)!

---

class: middle, center

# I want your feedback!

---

## Minute Paper

### (Half sheet of paper is fine.  Share with your neighbor.)

- What are the big take-aways for you from class today?
- What questions do you have about the course?  About the material you've learned so far?

---

layout: true

.footer[[Week 01 - Thursday](https://ismayc.github.io/soc301_s2017/2017/02/02/week-01---thursday/)]

---

name: week01th
class: center, middle

# Week 01 - Thursday

# February 2, 2017

---

## DataCamp Assignments

- <https://www.datacamp.com/groups/soc-301-spring-2017/assignments>

---

## Videos on Resources page

- <https://ismayc.github.io/soc301_s2017/resources/>

---

## Studying well and efficiently

- Image from [_Teach Students How to Learn_](https://www.amazon.com/Teach-Students-How-Learn-Metacognition/dp/162036316X)

### <http://ismayc.github.io/soc301_s2017/img/studentlearn.jpg>

---

## Tuesday plans

- Review the content in the Introduction to R DataCamp course
    - Finish writing multiple choice questions
- Study for Quiz 1 over Introduction to R DataCamp course on Thursday, February 9 in class
- Bring your laptops on Tuesday, and every class period!
- This is the time to make a good impression and start off strong!

---

## Minute papers

- Place your name on a sheet of paper.  Answer the following:

1. When you think of statistics what do you think of?
1. What statistical concepts would you like to learn about?
2. What concerns you most about this course?
3. Do you believe you'll be able to devote the time needed to succeed in this course?  Explain.
  - A four credit-hour course requires between 9 and 12 hours of time outside of it each week.

---

layout: true

.footer[[Week 01 - Tuesday](https://ismayc.github.io/soc301_s2017/2017/01/31/week-01---tuesday/)]

---

name: week01t
class: center, middle

# Week 01 - Tuesday

# January 31, 2017

---

## For interviews in groups of three

1. Name
3. How do you think this course applies to your major?
5. What are your goals for this course?
3. What is your class standing (Sophomore, Junior, etc.)?
3. What is your major?
4. What is your hometown?
6. What is the farthest from Pacific you were over break (in miles)?
7. What is one interesting fact about you?
8. How old is Chester (in years)?

---

class: center, middle

<img src="figure/notebook.jpg" alt="notebook" style="width:450px;">

---

## Slides link

### <http://ismayc.github.io/soc301_s2017/slides/slide_deck.html>

- Easier to get from <http://ismayc.github.io/soc301_s2017/>

---

## Course Textbook

- <http://moderndive.com>

---

## DataCamp Assignments

- <https://www.datacamp.com/groups/soc-301-spring-2017/assignments>

---

## Special accommodations

### Please come talk to me after class if you require special accommodations.

---

## To do for next time

- Carefully read over the syllabus in entirety
- Make note of important dates on the schedule
- Read Chapters 1 and 2 of [ModernDive](http://moderndive.com)
- Begin working on Introduction to R DataCamp course
    - Needs to be completed by 1 PM Pacific on Tuesday, February 7
    - If you have spent more than 30 minutes on a problem, move on to another one OR
  reach out for help.

---

## Asking for help

- Recommended:  Post your problem and drag a screenshot image of what you have tried to the #general channel on Slack.
- If you know the answer to a question there, please attempt to answer it.  It will help you learn!
- Send me a private message on Slack (@chester)
- Discuss your problems with the tutors in person
- Last resort, send the tutors a private message on Slack

---

## Thursday plans

- Bring your laptops on Thursday, and every class period!
- Work on and finish Introduction to R DataCamp course
- Make sure to have started and be at the point where you have specific questions Dinisa and I can address
- This is the time to make a good impression and start off strong!  

